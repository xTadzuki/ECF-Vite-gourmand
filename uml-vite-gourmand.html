<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UML — Vite & Gourmand</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=JetBrains+Mono:wght@400;600&family=DM+Sans:wght@300;400;500&display=swap');

  :root {
    --bg: #0e0f13;
    --surface: #16181f;
    --card: #1d2029;
    --border: #2c2f3e;
    --accent: #8b2635;
    --gold: #c9a84c;
    --text: #e8e6e0;
    --muted: #7a7d8e;
    --green: #3d8b5e;
    --blue: #2d6fa3;
    --purple: #6b4fa3;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-weight: 300;
    min-height: 100vh;
    padding: 0;
  }

  /* HEADER */
  .site-header {
    background: linear-gradient(135deg, #0e0f13 0%, #1a0c10 50%, #0e0f13 100%);
    border-bottom: 1px solid var(--border);
    padding: 48px 64px 40px;
    position: relative;
    overflow: hidden;
  }
  .site-header::before {
    content: '';
    position: absolute;
    top: -80px; right: -80px;
    width: 300px; height: 300px;
    background: radial-gradient(circle, rgba(139,38,53,0.15) 0%, transparent 70%);
    border-radius: 50%;
  }
  .site-header::after {
    content: '';
    position: absolute;
    bottom: -40px; left: 30%;
    width: 200px; height: 200px;
    background: radial-gradient(circle, rgba(201,168,76,0.08) 0%, transparent 70%);
    border-radius: 50%;
  }
  .header-tag {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    letter-spacing: 3px;
    color: var(--gold);
    text-transform: uppercase;
    margin-bottom: 12px;
    opacity: 0.8;
  }
  .header-title {
    font-family: 'Playfair Display', serif;
    font-size: 52px;
    font-weight: 700;
    line-height: 1;
    background: linear-gradient(135deg, var(--text) 30%, var(--gold) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 12px;
  }
  .header-sub {
    font-size: 15px;
    color: var(--muted);
    font-weight: 400;
  }
  .header-badges {
    display: flex;
    gap: 10px;
    margin-top: 24px;
  }
  .badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    padding: 5px 14px;
    border-radius: 2px;
    border: 1px solid;
  }
  .badge--uc { border-color: var(--blue); color: var(--blue); background: rgba(45,111,163,0.1); }
  .badge--class { border-color: var(--green); color: var(--green); background: rgba(61,139,94,0.1); }
  .badge--seq { border-color: var(--gold); color: var(--gold); background: rgba(201,168,76,0.1); }

  /* NAV */
  .nav {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(14,15,19,0.95);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
    display: flex;
    gap: 0;
    padding: 0 64px;
  }
  .nav a {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    letter-spacing: 2px;
    text-transform: uppercase;
    text-decoration: none;
    color: var(--muted);
    padding: 16px 20px;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
  }
  .nav a:hover { color: var(--text); border-bottom-color: var(--gold); }

  /* SECTIONS */
  .section {
    padding: 72px 64px;
    border-bottom: 1px solid var(--border);
  }
  .section:last-child { border-bottom: none; }

  .section-header {
    display: flex;
    align-items: flex-start;
    gap: 20px;
    margin-bottom: 48px;
  }
  .section-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 64px;
    font-weight: 600;
    line-height: 1;
    opacity: 0.06;
    user-select: none;
    min-width: 80px;
  }
  .section-info h2 {
    font-family: 'Playfair Display', serif;
    font-size: 32px;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 6px;
  }
  .section-info p {
    color: var(--muted);
    font-size: 14px;
    line-height: 1.6;
    max-width: 600px;
  }

  /* DIAGRAM CONTAINERS */
  .diagram-wrap {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 4px;
    overflow-x: auto;
    padding: 40px;
    position: relative;
  }
  .diagram-wrap::before {
    content: attr(data-label);
    position: absolute;
    top: 12px; right: 16px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--muted);
    opacity: 0.5;
  }

  svg text {
    font-family: 'DM Sans', sans-serif;
  }

  /* LEGEND */
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-top: 20px;
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--muted);
  }
  .legend-dot {
    width: 12px; height: 12px;
    border-radius: 2px;
    flex-shrink: 0;
  }
</style>
</head>
<body>

<!-- HEADER -->
<header class="site-header">
  <div class="header-tag">ECF Documentation Technique</div>
  <h1 class="header-title">Vite &amp; Gourmand — UML</h1>
  <p class="header-sub">Diagrammes UML complets · Use Case · Classe · Séquence</p>
  <div class="header-badges">
    <span class="badge badge--uc">Use Case</span>
    <span class="badge badge--class">Diagramme de Classes</span>
    <span class="badge badge--seq">Séquence</span>
  </div>
</header>

<!-- NAV -->
<nav class="nav">
  <a href="#usecase">Use Case</a>
  <a href="#class">Classes</a>
  <a href="#sequence">Séquence</a>
</nav>

<!-- ═══════════════════════════════════════════ -->
<!-- 1. USE CASE DIAGRAM                        -->
<!-- ═══════════════════════════════════════════ -->
<section class="section" id="usecase">
  <div class="section-header">
    <div class="section-num">01</div>
    <div class="section-info">
      <h2>Use Case Diagram</h2>
      <p>Représentation des fonctionnalités accessibles par chaque acteur du système (Visiteur, Client, Employé, Administrateur).</p>
    </div>
  </div>

  <div class="diagram-wrap" data-label="UML Use Case">
    <svg viewBox="0 0 1100 820" width="100%" xmlns="http://www.w3.org/2000/svg" style="font-family:'DM Sans',sans-serif;">
      <defs>
        <marker id="arr" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#4a4f66"/>
        </marker>
        <marker id="arr-inc" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#3d8b5e"/>
        </marker>
        <marker id="arr-ext" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#2d6fa3"/>
        </marker>
      </defs>

      <!-- BG -->
      <rect width="1100" height="820" fill="#1d2029" rx="4"/>

      <!-- ── SYSTEM BOUNDARY ── -->
      <rect x="230" y="30" width="680" height="760" rx="6" fill="none" stroke="#2c2f3e" stroke-width="1.5" stroke-dasharray="6,3"/>
      <text x="570" y="22" text-anchor="middle" font-size="13" fill="#7a7d8e" font-weight="500" letter-spacing="2">SYSTÈME — VITE &amp; GOURMAND</text>

      <!-- ══════════════ ACTORS ══════════════ -->

      <!-- Visiteur -->
      <g>
        <circle cx="55" cy="165" r="16" fill="none" stroke="#4a4f66" stroke-width="1.5"/>
        <line x1="55" y1="181" x2="55" y2="215" stroke="#4a4f66" stroke-width="1.5"/>
        <line x1="30" y1="198" x2="80" y2="198" stroke="#4a4f66" stroke-width="1.5"/>
        <line x1="55" y1="215" x2="35" y2="238" stroke="#4a4f66" stroke-width="1.5"/>
        <line x1="55" y1="215" x2="75" y2="238" stroke="#4a4f66" stroke-width="1.5"/>
        <text x="55" y="255" text-anchor="middle" font-size="12" fill="#7a7d8e" font-weight="500">Visiteur</text>
      </g>

      <!-- Client -->
      <g>
        <circle cx="55" cy="415" r="16" fill="none" stroke="#2d6fa3" stroke-width="1.8"/>
        <line x1="55" y1="431" x2="55" y2="465" stroke="#2d6fa3" stroke-width="1.5"/>
        <line x1="30" y1="448" x2="80" y2="448" stroke="#2d6fa3" stroke-width="1.5"/>
        <line x1="55" y1="465" x2="35" y2="488" stroke="#2d6fa3" stroke-width="1.5"/>
        <line x1="55" y1="465" x2="75" y2="488" stroke="#2d6fa3" stroke-width="1.5"/>
        <text x="55" y="505" text-anchor="middle" font-size="12" fill="#2d6fa3" font-weight="600">Client</text>
      </g>

      <!-- Employé -->
      <g>
        <circle cx="1055" cy="390" r="16" fill="none" stroke="#3d8b5e" stroke-width="1.8"/>
        <line x1="1055" y1="406" x2="1055" y2="440" stroke="#3d8b5e" stroke-width="1.5"/>
        <line x1="1030" y1="423" x2="1080" y2="423" stroke="#3d8b5e" stroke-width="1.5"/>
        <line x1="1055" y1="440" x2="1035" y2="463" stroke="#3d8b5e" stroke-width="1.5"/>
        <line x1="1055" y1="440" x2="1075" y2="463" stroke="#3d8b5e" stroke-width="1.5"/>
        <text x="1055" y="480" text-anchor="middle" font-size="12" fill="#3d8b5e" font-weight="600">Employé</text>
      </g>

      <!-- Admin -->
      <g>
        <circle cx="1055" cy="640" r="16" fill="none" stroke="#8b2635" stroke-width="2"/>
        <line x1="1055" y1="656" x2="1055" y2="690" stroke="#8b2635" stroke-width="1.5"/>
        <line x1="1030" y1="673" x2="1080" y2="673" stroke="#8b2635" stroke-width="1.5"/>
        <line x1="1055" y1="690" x2="1035" y2="713" stroke="#8b2635" stroke-width="1.5"/>
        <line x1="1055" y1="690" x2="1075" y2="713" stroke="#8b2635" stroke-width="1.5"/>
        <text x="1055" y="730" text-anchor="middle" font-size="12" fill="#8b2635" font-weight="600">Admin</text>
      </g>

      <!-- ══════════════ USE CASES ══════════════ -->
      <!-- Ellipse helper: cx cy rx ry label -->

      <!-- VISITEUR use cases -->
      <ellipse cx="400" cy="80" rx="100" ry="22" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="400" y="85" text-anchor="middle" font-size="11" fill="#c8c4b8">Consulter les menus</text>

      <ellipse cx="580" cy="80" rx="100" ry="22" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="580" y="85" text-anchor="middle" font-size="11" fill="#c8c4b8">Voir détail d'un menu</text>

      <ellipse cx="760" cy="80" rx="100" ry="22" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="760" y="85" text-anchor="middle" font-size="11" fill="#c8c4b8">Filtrer les menus</text>

      <ellipse cx="400" cy="145" rx="100" ry="22" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="400" y="150" text-anchor="middle" font-size="11" fill="#c8c4b8">S'inscrire</text>

      <ellipse cx="580" cy="145" rx="100" ry="22" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="580" y="150" text-anchor="middle" font-size="11" fill="#c8c4b8">Se connecter</text>

      <ellipse cx="760" cy="145" rx="100" ry="22" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="760" y="150" text-anchor="middle" font-size="11" fill="#c8c4b8">Réinitialiser mdp</text>

      <ellipse cx="490" cy="210" rx="100" ry="22" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="490" y="215" text-anchor="middle" font-size="11" fill="#c8c4b8">Contacter l'équipe</text>

      <!-- CLIENT use cases -->
      <ellipse cx="380" cy="310" rx="108" ry="22" fill="#0f1c2d" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="380" y="315" text-anchor="middle" font-size="11" fill="#7bb8de">Commander un menu</text>

      <ellipse cx="590" cy="310" rx="108" ry="22" fill="#0f1c2d" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="590" y="315" text-anchor="middle" font-size="11" fill="#7bb8de">Voir mes commandes</text>

      <ellipse cx="380" cy="370" rx="108" ry="22" fill="#0f1c2d" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="380" y="375" text-anchor="middle" font-size="11" fill="#7bb8de">Modifier commande</text>

      <ellipse cx="590" cy="370" rx="108" ry="22" fill="#0f1c2d" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="590" y="375" text-anchor="middle" font-size="11" fill="#7bb8de">Annuler commande</text>

      <ellipse cx="380" cy="430" rx="108" ry="22" fill="#0f1c2d" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="380" y="435" text-anchor="middle" font-size="11" fill="#7bb8de">Modifier profil</text>

      <ellipse cx="590" cy="430" rx="108" ry="22" fill="#0f1c2d" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="590" y="435" text-anchor="middle" font-size="11" fill="#7bb8de">Voir détail commande</text>

      <!-- EMPLOYÉ use cases -->
      <ellipse cx="800" cy="340" rx="115" ry="22" fill="#0f1f17" stroke="#3d8b5e" stroke-width="1.2"/>
      <text x="800" y="345" text-anchor="middle" font-size="11" fill="#80c49a">Voir toutes les commandes</text>

      <ellipse cx="800" cy="400" rx="115" ry="22" fill="#0f1f17" stroke="#3d8b5e" stroke-width="1.2"/>
      <text x="800" y="405" text-anchor="middle" font-size="11" fill="#80c49a">Changer statut commande</text>

      <ellipse cx="800" cy="460" rx="115" ry="22" fill="#0f1f17" stroke="#3d8b5e" stroke-width="1.2"/>
      <text x="800" y="465" text-anchor="middle" font-size="11" fill="#80c49a">Annuler (avec motif)</text>

      <ellipse cx="800" cy="520" rx="115" ry="22" fill="#0f1f17" stroke="#3d8b5e" stroke-width="1.2"/>
      <text x="800" y="525" text-anchor="middle" font-size="11" fill="#80c49a">Valider avis clients</text>

      <!-- ADMIN use cases -->
      <ellipse cx="390" cy="570" rx="115" ry="22" fill="#1f0c10" stroke="#8b2635" stroke-width="1.2"/>
      <text x="390" y="575" text-anchor="middle" font-size="11" fill="#d4758a">Gérer les menus (CRUD)</text>

      <ellipse cx="610" cy="570" rx="115" ry="22" fill="#1f0c10" stroke="#8b2635" stroke-width="1.2"/>
      <text x="610" y="575" text-anchor="middle" font-size="11" fill="#d4758a">Gérer les employés</text>

      <ellipse cx="390" cy="635" rx="115" ry="22" fill="#1f0c10" stroke="#8b2635" stroke-width="1.2"/>
      <text x="390" y="640" text-anchor="middle" font-size="11" fill="#d4758a">Voir statistiques</text>

      <ellipse cx="610" cy="635" rx="115" ry="22" fill="#1f0c10" stroke="#8b2635" stroke-width="1.2"/>
      <text x="610" y="640" text-anchor="middle" font-size="11" fill="#d4758a">Activer/désactiver compte</text>

      <ellipse cx="500" cy="700" rx="115" ry="22" fill="#1f0c10" stroke="#8b2635" stroke-width="1.2"/>
      <text x="500" y="705" text-anchor="middle" font-size="11" fill="#d4758a">Créer compte employé</text>

      <!-- ── ASSOCIATIONS VISITEUR ── -->
      <line x1="71" y1="160" x2="298" y2="83" stroke="#4a4f66" stroke-width="1"/>
      <line x1="71" y1="165" x2="298" y2="148" stroke="#4a4f66" stroke-width="1"/>
      <line x1="71" y1="170" x2="390" y2="148" stroke="#4a4f66" stroke-width="1"/>
      <line x1="71" y1="165" x2="390" y2="83" stroke="#4a4f66" stroke-width="1"/>
      <line x1="71" y1="165" x2="480" y2="83" stroke="#4a4f66" stroke-width="1"/>
      <line x1="71" y1="165" x2="660" y2="83" stroke="#4a4f66" stroke-width="1"/>
      <line x1="71" y1="165" x2="480" y2="148" stroke="#4a4f66" stroke-width="1"/>
      <line x1="71" y1="165" x2="660" y2="148" stroke="#4a4f66" stroke-width="1"/>
      <line x1="71" y1="168" x2="390" y2="210" stroke="#4a4f66" stroke-width="1"/>

      <!-- ── ASSOCIATIONS CLIENT ── -->
      <line x1="71" y1="415" x2="270" y2="310" stroke="#2d6fa3" stroke-width="1"/>
      <line x1="71" y1="415" x2="480" y2="310" stroke="#2d6fa3" stroke-width="1"/>
      <line x1="71" y1="415" x2="270" y2="370" stroke="#2d6fa3" stroke-width="1"/>
      <line x1="71" y1="415" x2="480" y2="370" stroke="#2d6fa3" stroke-width="1"/>
      <line x1="71" y1="420" x2="270" y2="430" stroke="#2d6fa3" stroke-width="1"/>
      <line x1="71" y1="420" x2="480" y2="430" stroke="#2d6fa3" stroke-width="1"/>

      <!-- ── ASSOCIATIONS EMPLOYÉ ── -->
      <line x1="1039" y1="390" x2="917" y2="340" stroke="#3d8b5e" stroke-width="1"/>
      <line x1="1039" y1="395" x2="917" y2="400" stroke="#3d8b5e" stroke-width="1"/>
      <line x1="1039" y1="400" x2="917" y2="460" stroke="#3d8b5e" stroke-width="1"/>
      <line x1="1039" y1="400" x2="917" y2="520" stroke="#3d8b5e" stroke-width="1"/>

      <!-- ── ASSOCIATIONS ADMIN ── -->
      <line x1="1039" y1="640" x2="507" y2="570" stroke="#8b2635" stroke-width="1"/>
      <line x1="1039" y1="645" x2="727" y2="570" stroke="#8b2635" stroke-width="1"/>
      <line x1="1039" y1="645" x2="507" y2="635" stroke="#8b2635" stroke-width="1"/>
      <line x1="1039" y1="645" x2="727" y2="635" stroke="#8b2635" stroke-width="1"/>
      <line x1="1039" y1="650" x2="617" y2="700" stroke="#8b2635" stroke-width="1"/>

      <!-- include: Modifier commande →→ Commander -->
      <line x1="380" y1="348" x2="380" y2="310" stroke="#3d8b5e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arr-inc)"/>
      <text x="320" y="332" font-size="9" fill="#3d8b5e">«include»</text>

      <!-- extend: filtrer → consulter -->
      <line x1="760" y1="80" x2="500" y2="80" stroke="#2d6fa3" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#arr-ext)"/>
      <text x="600" y="73" font-size="9" fill="#2d6fa3">«extend»</text>

      <!-- ── LEGEND ── -->
      <rect x="245" y="758" width="580" height="38" rx="3" fill="#16181f" stroke="#2c2f3e" stroke-width="1"/>
      <line x1="270" y1="777" x2="295" y2="777" stroke="#4a4f66" stroke-width="1.5"/>
      <text x="300" y="781" font-size="10" fill="#7a7d8e">Visiteur</text>
      <line x1="360" y1="777" x2="385" y2="777" stroke="#2d6fa3" stroke-width="1.5"/>
      <text x="390" y="781" font-size="10" fill="#7a7d8e">Client</text>
      <line x1="435" y1="777" x2="460" y2="777" stroke="#3d8b5e" stroke-width="1.5"/>
      <text x="465" y="781" font-size="10" fill="#7a7d8e">Employé</text>
      <line x1="520" y1="777" x2="545" y2="777" stroke="#8b2635" stroke-width="1.5"/>
      <text x="550" y="781" font-size="10" fill="#7a7d8e">Admin</text>
      <line x1="595" y1="777" x2="620" y2="777" stroke="#3d8b5e" stroke-width="1" stroke-dasharray="3,2"/>
      <text x="625" y="781" font-size="10" fill="#7a7d8e">«include/extend»</text>

    </svg>
  </div>
</section>


<!-- ═══════════════════════════════════════════ -->
<!-- 2. CLASS DIAGRAM                           -->
<!-- ═══════════════════════════════════════════ -->
<section class="section" id="class">
  <div class="section-header">
    <div class="section-num">02</div>
    <div class="section-info">
      <h2>Diagramme de Classes</h2>
      <p>Entités principales (modèles de données), couche DAL (Database) et services (Auth, MongoService, Mailer) avec leurs relations.</p>
    </div>
  </div>

  <div class="diagram-wrap" data-label="UML Class Diagram">
    <svg viewBox="0 0 1200 980" width="100%" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <marker id="assoc" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#4a4f66"/>
        </marker>
        <marker id="comp" markerWidth="10" markerHeight="8" refX="1" refY="4" orient="auto">
          <polygon points="0,4 5,0 10,4 5,8" fill="#2d6fa3"/>
        </marker>
        <marker id="inh" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
          <polygon points="0,0 10,5 0,10" fill="none" stroke="#c9a84c" stroke-width="1.5"/>
        </marker>
        <marker id="dep" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#7a7d8e"/>
        </marker>
      </defs>

      <rect width="1200" height="980" fill="#1d2029" rx="4"/>

      <!-- ═══ HELPER: class box macro ═══ -->
      <!-- Each class: rect for header, rect for attrs, rect for methods -->

      <!-- ─────────────────────────────────── -->
      <!-- ROLE                               -->
      <!-- ─────────────────────────────────── -->
      <g id="cls-role">
        <rect x="30" y="30" width="180" height="110" rx="3" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.5"/>
        <rect x="30" y="30" width="180" height="28" rx="3" fill="#23252f"/>
        <text x="120" y="49" text-anchor="middle" font-size="12" font-weight="700" fill="#e8e6e0">Role</text>
        <line x1="30" y1="58" x2="210" y2="58" stroke="#4a4f66" stroke-width="1"/>
        <text x="40" y="74" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="40" y="90" font-size="10" fill="#9a97a0">+ name: string</text>
        <line x1="30" y1="100" x2="210" y2="100" stroke="#2c2f3e" stroke-width="1"/>
        <text x="40" y="118" font-size="10" fill="#6a6d7e" font-style="italic">«table: roles»</text>
      </g>

      <!-- USER -->
      <g id="cls-user">
        <rect x="260" y="30" width="220" height="230" rx="3" fill="#1a1c25" stroke="#2d6fa3" stroke-width="1.5"/>
        <rect x="260" y="30" width="220" height="28" rx="3" fill="#152030"/>
        <text x="370" y="49" text-anchor="middle" font-size="12" font-weight="700" fill="#7bb8de">User</text>
        <line x1="260" y1="58" x2="480" y2="58" stroke="#2d6fa3" stroke-width="1"/>
        <text x="270" y="74" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="270" y="90" font-size="10" fill="#9a97a0">+ role_id: int</text>
        <text x="270" y="106" font-size="10" fill="#9a97a0">+ firstname: string</text>
        <text x="270" y="122" font-size="10" fill="#9a97a0">+ lastname: string</text>
        <text x="270" y="138" font-size="10" fill="#9a97a0">+ email: string</text>
        <text x="270" y="154" font-size="10" fill="#9a97a0">+ password: string</text>
        <text x="270" y="170" font-size="10" fill="#9a97a0">+ is_active: bool</text>
        <text x="270" y="186" font-size="10" fill="#9a97a0">+ reset_token: string?</text>
        <line x1="260" y1="196" x2="480" y2="196" stroke="#2c2f3e" stroke-width="1"/>
        <text x="270" y="212" font-size="10" fill="#6ea8d6">+ findByEmail(email): User?</text>
        <text x="270" y="226" font-size="10" fill="#6ea8d6">+ createUser(data): int</text>
        <text x="270" y="240" font-size="10" fill="#6ea8d6">+ setResetToken(...): void</text>
        <text x="270" y="254" font-size="10" fill="#6a6d7e" font-style="italic">«table: users»</text>
      </g>

      <!-- MENU -->
      <g id="cls-menu">
        <rect x="540" y="30" width="220" height="260" rx="3" fill="#1a1c25" stroke="#c9a84c" stroke-width="1.5"/>
        <rect x="540" y="30" width="220" height="28" rx="3" fill="#221e10"/>
        <text x="650" y="49" text-anchor="middle" font-size="12" font-weight="700" fill="#c9a84c">Menu</text>
        <line x1="540" y1="58" x2="760" y2="58" stroke="#c9a84c" stroke-width="1"/>
        <text x="550" y="74" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="550" y="90" font-size="10" fill="#9a97a0">+ title: string</text>
        <text x="550" y="106" font-size="10" fill="#9a97a0">+ description: text</text>
        <text x="550" y="122" font-size="10" fill="#9a97a0">+ price: decimal</text>
        <text x="550" y="138" font-size="10" fill="#9a97a0">+ min_people: int</text>
        <text x="550" y="154" font-size="10" fill="#9a97a0">+ stock: int</text>
        <text x="550" y="170" font-size="10" fill="#9a97a0">+ theme_id: int?</text>
        <text x="550" y="186" font-size="10" fill="#9a97a0">+ diet_id: int?</text>
        <line x1="540" y1="196" x2="760" y2="196" stroke="#2c2f3e" stroke-width="1"/>
        <text x="550" y="212" font-size="10" fill="#d4b86a">+ all(): Menu[]</text>
        <text x="550" y="226" font-size="10" fill="#d4b86a">+ find(id): Menu?</text>
        <text x="550" y="240" font-size="10" fill="#d4b86a">+ filter(filters): Menu[]</text>
        <text x="550" y="254" font-size="10" fill="#d4b86a">+ create(data): int</text>
        <text x="550" y="268" font-size="10" fill="#d4b86a">+ update(id,data): void</text>
        <text x="550" y="282" font-size="10" fill="#6a6d7e" font-style="italic">«table: menus»</text>
      </g>

      <!-- ORDER -->
      <g id="cls-order">
        <rect x="540" y="360" width="220" height="290" rx="3" fill="#1a1c25" stroke="#8b2635" stroke-width="1.5"/>
        <rect x="540" y="360" width="220" height="28" rx="3" fill="#200c10"/>
        <text x="650" y="379" text-anchor="middle" font-size="12" font-weight="700" fill="#d4758a">Order</text>
        <line x1="540" y1="388" x2="760" y2="388" stroke="#8b2635" stroke-width="1"/>
        <text x="550" y="404" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="550" y="420" font-size="10" fill="#9a97a0">+ user_id: int</text>
        <text x="550" y="436" font-size="10" fill="#9a97a0">+ menu_id: int</text>
        <text x="550" y="452" font-size="10" fill="#9a97a0">+ event_date: date</text>
        <text x="550" y="468" font-size="10" fill="#9a97a0">+ people_count: int</text>
        <text x="550" y="484" font-size="10" fill="#9a97a0">+ total_price: decimal</text>
        <text x="550" y="500" font-size="10" fill="#9a97a0">+ status: string</text>
        <text x="550" y="516" font-size="10" fill="#9a97a0">+ delivery_price: decimal</text>
        <line x1="540" y1="526" x2="760" y2="526" stroke="#2c2f3e" stroke-width="1"/>
        <text x="550" y="542" font-size="10" fill="#d4758a">+ create(data): int</text>
        <text x="550" y="556" font-size="10" fill="#d4758a">+ listByUser(userId): Order[]</text>
        <text x="550" y="570" font-size="10" fill="#d4758a">+ updateStatusByEmployee()</text>
        <text x="550" y="584" font-size="10" fill="#d4758a">+ cancelByUser(...): bool</text>
        <text x="550" y="598" font-size="10" fill="#d4758a">+ statsOrdersByStatus()</text>
        <text x="550" y="616" font-size="10" fill="#6a6d7e" font-style="italic">«table: orders»</text>
        <text x="550" y="632" font-size="10" fill="#6a6d7e" font-style="italic">«table: order_status_history»</text>
      </g>

      <!-- THEME -->
      <g id="cls-theme">
        <rect x="820" y="30" width="160" height="100" rx="3" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
        <rect x="820" y="30" width="160" height="28" rx="3" fill="#1e1f28"/>
        <text x="900" y="49" text-anchor="middle" font-size="12" font-weight="600" fill="#b0aec8">Theme</text>
        <line x1="820" y1="58" x2="980" y2="58" stroke="#4a4f66" stroke-width="1"/>
        <text x="830" y="74" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="830" y="90" font-size="10" fill="#9a97a0">+ name: string</text>
        <line x1="820" y1="100" x2="980" y2="100" stroke="#2c2f3e" stroke-width="1"/>
        <text x="830" y="116" font-size="10" fill="#6a6d7e" font-style="italic">«table: themes»</text>
      </g>

      <!-- DIET -->
      <g id="cls-diet">
        <rect x="820" y="160" width="160" height="100" rx="3" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
        <rect x="820" y="160" width="160" height="28" rx="3" fill="#1e1f28"/>
        <text x="900" y="179" text-anchor="middle" font-size="12" font-weight="600" fill="#b0aec8">Diet</text>
        <line x1="820" y1="188" x2="980" y2="188" stroke="#4a4f66" stroke-width="1"/>
        <text x="830" y="204" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="830" y="220" font-size="10" fill="#9a97a0">+ name: string</text>
        <line x1="820" y1="230" x2="980" y2="230" stroke="#2c2f3e" stroke-width="1"/>
        <text x="830" y="246" font-size="10" fill="#6a6d7e" font-style="italic">«table: diets»</text>
      </g>

      <!-- DISH -->
      <g id="cls-dish">
        <rect x="820" y="290" width="180" height="120" rx="3" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
        <rect x="820" y="290" width="180" height="28" rx="3" fill="#1e1f28"/>
        <text x="910" y="309" text-anchor="middle" font-size="12" font-weight="600" fill="#b0aec8">Dish</text>
        <line x1="820" y1="318" x2="1000" y2="318" stroke="#4a4f66" stroke-width="1"/>
        <text x="830" y="334" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="830" y="350" font-size="10" fill="#9a97a0">+ name: string</text>
        <text x="830" y="366" font-size="10" fill="#9a97a0">+ type: enum(entrée,plat,dessert)</text>
        <line x1="820" y1="376" x2="1000" y2="376" stroke="#2c2f3e" stroke-width="1"/>
        <text x="830" y="392" font-size="10" fill="#6a6d7e" font-style="italic">«table: dishes»</text>
      </g>

      <!-- ALLERGEN -->
      <g id="cls-allergen">
        <rect x="820" y="440" width="180" height="100" rx="3" fill="#1a1c25" stroke="#4a4f66" stroke-width="1.2"/>
        <rect x="820" y="440" width="180" height="28" rx="3" fill="#1e1f28"/>
        <text x="910" y="459" text-anchor="middle" font-size="12" font-weight="600" fill="#b0aec8">Allergen</text>
        <line x1="820" y1="468" x2="1000" y2="468" stroke="#4a4f66" stroke-width="1"/>
        <text x="830" y="484" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="830" y="500" font-size="10" fill="#9a97a0">+ name: string</text>
        <line x1="820" y1="510" x2="1000" y2="510" stroke="#2c2f3e" stroke-width="1"/>
        <text x="830" y="526" font-size="10" fill="#6a6d7e" font-style="italic">«table: allergens»</text>
      </g>

      <!-- REVIEW -->
      <g id="cls-review">
        <rect x="260" y="400" width="220" height="160" rx="3" fill="#1a1c25" stroke="#6b4fa3" stroke-width="1.5"/>
        <rect x="260" y="400" width="220" height="28" rx="3" fill="#1a1530"/>
        <text x="370" y="419" text-anchor="middle" font-size="12" font-weight="700" fill="#a886d4">Review</text>
        <line x1="260" y1="428" x2="480" y2="428" stroke="#6b4fa3" stroke-width="1"/>
        <text x="270" y="444" font-size="10" fill="#9a97a0">+ id: int</text>
        <text x="270" y="460" font-size="10" fill="#9a97a0">+ order_id: int</text>
        <text x="270" y="476" font-size="10" fill="#9a97a0">+ rating: int (1-5)</text>
        <text x="270" y="492" font-size="10" fill="#9a97a0">+ comment: text?</text>
        <text x="270" y="508" font-size="10" fill="#9a97a0">+ is_validated: bool</text>
        <line x1="260" y1="518" x2="480" y2="518" stroke="#2c2f3e" stroke-width="1"/>
        <text x="270" y="534" font-size="10" fill="#6a6d7e" font-style="italic">«table: reviews»</text>
        <text x="270" y="550" font-size="10" fill="#6a6d7e" font-style="italic">«table: order_status_history»</text>
      </g>

      <!-- ─── SERVICE CLASSES ─── -->

      <!-- DATABASE (DAL) -->
      <g id="cls-db">
        <rect x="30" y="400" width="200" height="130" rx="3" fill="#0f1a0f" stroke="#3d8b5e" stroke-width="1.5"/>
        <rect x="30" y="400" width="200" height="28" rx="3" fill="#0c1a10"/>
        <text x="65" y="415" font-size="9" fill="#3d8b5e">«service»</text>
        <text x="130" y="419" text-anchor="middle" font-size="12" font-weight="700" fill="#80c49a">Database</text>
        <line x1="30" y1="428" x2="230" y2="428" stroke="#3d8b5e" stroke-width="1"/>
        <text x="40" y="444" font-size="10" fill="#9a97a0">- pdo: PDO (singleton)</text>
        <line x1="30" y1="454" x2="230" y2="454" stroke="#2c2f3e" stroke-width="1"/>
        <text x="40" y="470" font-size="10" fill="#80c49a">+ getConnection(): PDO</text>
        <text x="40" y="486" font-size="10" fill="#6a6d7e">Lit: DB_HOST, DB_PORT</text>
        <text x="40" y="502" font-size="10" fill="#6a6d7e">DB_NAME, DB_USER, DB_PASS</text>
        <text x="40" y="520" font-size="10" fill="#6a6d7e" font-style="italic">«singleton pattern»</text>
      </g>

      <!-- AUTH SERVICE -->
      <g id="cls-auth">
        <rect x="30" y="560" width="200" height="150" rx="3" fill="#1f1510" stroke="#c9a84c" stroke-width="1.5"/>
        <rect x="30" y="560" width="200" height="28" rx="3" fill="#221c10"/>
        <text x="65" y="575" font-size="9" fill="#c9a84c">«service»</text>
        <text x="130" y="579" text-anchor="middle" font-size="12" font-weight="700" fill="#c9a84c">Auth</text>
        <line x1="30" y1="588" x2="230" y2="588" stroke="#c9a84c" stroke-width="1"/>
        <text x="40" y="604" font-size="10" fill="#9a97a0">Utilise: $_SESSION</text>
        <line x1="30" y1="614" x2="230" y2="614" stroke="#2c2f3e" stroke-width="1"/>
        <text x="40" y="630" font-size="10" fill="#d4b86a">+ isLogged(): bool</text>
        <text x="40" y="646" font-size="10" fill="#d4b86a">+ userId(): int?</text>
        <text x="40" y="662" font-size="10" fill="#d4b86a">+ role(): string?</text>
        <text x="40" y="678" font-size="10" fill="#d4b86a">+ requireLogin(): void</text>
        <text x="40" y="694" font-size="10" fill="#d4b86a">+ requireRole(roles[]): void</text>
      </g>

      <!-- MONGO SERVICE -->
      <g id="cls-mongo">
        <rect x="260" y="600" width="200" height="130" rx="3" fill="#0f1520" stroke="#2d6fa3" stroke-width="1.5"/>
        <rect x="260" y="600" width="200" height="28" rx="3" fill="#10192a"/>
        <text x="295" y="615" font-size="9" fill="#2d6fa3">«service»</text>
        <text x="360" y="619" text-anchor="middle" font-size="12" font-weight="700" fill="#7bb8de">MongoService</text>
        <line x1="260" y1="628" x2="460" y2="628" stroke="#2d6fa3" stroke-width="1"/>
        <text x="270" y="644" font-size="10" fill="#9a97a0">Lit: MONGODB_URI</text>
        <line x1="260" y1="654" x2="460" y2="654" stroke="#2c2f3e" stroke-width="1"/>
        <text x="270" y="670" font-size="10" fill="#7bb8de">+ all(): array</text>
        <text x="270" y="686" font-size="10" fill="#6a6d7e">Retourne données reviews</text>
        <text x="270" y="702" font-size="10" fill="#6a6d7e">et logs depuis MongoDB</text>
        <text x="270" y="718" font-size="10" fill="#6a6d7e" font-style="italic">«MongoDB\Client»</text>
      </g>

      <!-- MAILER SERVICE -->
      <g id="cls-mailer">
        <rect x="500" y="720" width="200" height="110" rx="3" fill="#1f100f" stroke="#8b2635" stroke-width="1.5"/>
        <rect x="500" y="720" width="200" height="28" rx="3" fill="#20100e"/>
        <text x="535" y="735" font-size="9" fill="#8b2635">«service»</text>
        <text x="600" y="739" text-anchor="middle" font-size="12" font-weight="700" fill="#d4758a">Mailer</text>
        <line x1="500" y1="748" x2="700" y2="748" stroke="#8b2635" stroke-width="1"/>
        <line x1="500" y1="758" x2="700" y2="758" stroke="#2c2f3e" stroke-width="1"/>
        <text x="510" y="774" font-size="10" fill="#d4758a">+ sendResetLink(email, token)</text>
        <text x="510" y="790" font-size="10" fill="#6a6d7e">Lit: MAIL_FROM, MAIL_HOST</text>
        <text x="510" y="806" font-size="10" fill="#6a6d7e" font-style="italic">«SMTP / mail()»</text>
      </g>

      <!-- ─── RELATIONS ─── -->

      <!-- Role 1 → * User -->
      <line x1="210" y1="90" x2="260" y2="90" stroke="#4a4f66" stroke-width="1.2" marker-end="url(#assoc)"/>
      <text x="214" y="84" font-size="9" fill="#7a7d8e">1</text>
      <text x="244" y="84" font-size="9" fill="#7a7d8e">*</text>

      <!-- User 1 → * Order -->
      <line x1="370" y1="260" x2="540" y2="390" stroke="#2d6fa3" stroke-width="1.2" marker-end="url(#assoc)"/>
      <text x="375" y="280" font-size="9" fill="#2d6fa3">1</text>
      <text x="525" y="380" font-size="9" fill="#2d6fa3">*</text>

      <!-- Menu 1 → * Order -->
      <line x1="650" y1="310" x2="650" y2="360" stroke="#c9a84c" stroke-width="1.2" marker-end="url(#assoc)"/>
      <text x="655" y="330" font-size="9" fill="#c9a84c">1</text>
      <text x="655" y="355" font-size="9" fill="#c9a84c">*</text>

      <!-- Menu → Theme -->
      <line x1="760" y1="70" x2="820" y2="65" stroke="#c9a84c" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#assoc)"/>
      <text x="770" y="63" font-size="9" fill="#c9a84c">theme</text>

      <!-- Menu → Diet -->
      <line x1="760" y1="200" x2="820" y2="200" stroke="#c9a84c" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#assoc)"/>
      <text x="770" y="193" font-size="9" fill="#c9a84c">diet</text>

      <!-- Menu *—* Dish (menu_dish) -->
      <line x1="760" y1="260" x2="820" y2="330" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="762" y="276" font-size="9" fill="#7a7d8e">*</text>
      <text x="804" y="325" font-size="9" fill="#7a7d8e">*</text>
      <rect x="770" y="298" width="40" height="18" rx="2" fill="#16181f" stroke="#2c2f3e" stroke-width="1"/>
      <text x="790" y="311" text-anchor="middle" font-size="8" fill="#4a4f66">menu_dish</text>

      <!-- Dish *—* Allergen -->
      <line x1="910" y1="410" x2="910" y2="440" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="914" y="426" font-size="9" fill="#7a7d8e">*</text>
      <text x="914" y="445" font-size="9" fill="#7a7d8e">*</text>
      <rect x="872" y="419" width="58" height="18" rx="2" fill="#16181f" stroke="#2c2f3e" stroke-width="1"/>
      <text x="901" y="432" text-anchor="middle" font-size="8" fill="#4a4f66">dish_allergen</text>

      <!-- Order 1 → * Review -->
      <line x1="540" y1="480" x2="480" y2="480" stroke="#8b2635" stroke-width="1.2" marker-end="url(#assoc)"/>
      <text x="542" y="474" font-size="9" fill="#8b2635">1</text>
      <text x="466" y="474" font-size="9" fill="#8b2635">*</text>

      <!-- Database ← (use) Models -->
      <line x1="230" y1="450" x2="260" y2="430" stroke="#3d8b5e" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#dep)"/>
      <text x="232" y="444" font-size="8" fill="#3d8b5e">«use»</text>

      <!-- Auth ← (use) Controllers -->
      <line x1="130" y1="560" x2="270" y2="440" stroke="#c9a84c" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#dep)"/>
      <text x="155" y="500" font-size="8" fill="#c9a84c">«use»</text>

    </svg>
  </div>

  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:#2d6fa3;"></div>Entité principale (MySQL)</div>
    <div class="legend-item"><div class="legend-dot" style="background:#3d8b5e;"></div>Couche DAL (Database)</div>
    <div class="legend-item"><div class="legend-dot" style="background:#c9a84c;"></div>Service métier</div>
    <div class="legend-item"><div class="legend-dot" style="background:#8b2635;"></div>Relation 1→*</div>
    <div class="legend-item"><div class="legend-dot" style="background:#4a4f66; opacity:0.5;"></div>Association / N-N</div>
  </div>
</section>


<!-- ═══════════════════════════════════════════ -->
<!-- 3. SEQUENCE DIAGRAM                        -->
<!-- ═══════════════════════════════════════════ -->
<section class="section" id="sequence">
  <div class="section-header">
    <div class="section-num">03</div>
    <div class="section-info">
      <h2>Diagrammes de Séquence</h2>
      <p>Deux scénarios clés : le filtrage asynchrone des menus (fetch AJAX), et le flux complet de passation d'une commande.</p>
    </div>
  </div>

  <!-- SEQ 1: Filtrage async -->
  <h3 style="font-family:'JetBrains Mono',monospace; font-size:13px; letter-spacing:2px; text-transform:uppercase; color:var(--gold); margin-bottom:20px; font-weight:600;">
    Scénario A — Filtrage asynchrone des menus
  </h3>

  <div class="diagram-wrap" data-label="Sequence — Filtrage AJAX">
    <svg viewBox="0 0 1000 560" width="100%" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <marker id="sarr" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#c9a84c"/>
        </marker>
        <marker id="rarr" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#3d8b5e"/>
        </marker>
      </defs>

      <rect width="1000" height="560" fill="#1d2029" rx="4"/>

      <!-- ACTORS / LIFELINES -->
      <!-- Navigateur -->
      <rect x="50" y="20" width="140" height="38" rx="3" fill="#23252f" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="120" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#e8e6e0">:Navigateur</text>
      <line x1="120" y1="58" x2="120" y2="540" stroke="#4a4f66" stroke-width="1" stroke-dasharray="5,3"/>

      <!-- menus-filters.js -->
      <rect x="240" y="20" width="160" height="38" rx="3" fill="#221e10" stroke="#c9a84c" stroke-width="1.2"/>
      <text x="320" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#c9a84c">:menus-filters.js</text>
      <line x1="320" y1="58" x2="320" y2="540" stroke="#c9a84c" stroke-width="1" stroke-dasharray="5,3"/>

      <!-- index.php -->
      <rect x="460" y="20" width="140" height="38" rx="3" fill="#152030" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="530" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#7bb8de">:index.php</text>
      <line x1="530" y1="58" x2="530" y2="540" stroke="#2d6fa3" stroke-width="1" stroke-dasharray="5,3"/>

      <!-- MenuController -->
      <rect x="650" y="20" width="155" height="38" rx="3" fill="#1f0c10" stroke="#8b2635" stroke-width="1.2"/>
      <text x="727" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#d4758a">:MenuController</text>
      <line x1="727" y1="58" x2="727" y2="540" stroke="#8b2635" stroke-width="1" stroke-dasharray="5,3"/>

      <!-- Menu Model -->
      <rect x="860" y="20" width="120" height="38" rx="3" fill="#0f1520" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="920" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#7bb8de">:Menu</text>
      <line x1="920" y1="58" x2="920" y2="540" stroke="#2d6fa3" stroke-width="1" stroke-dasharray="5,3"/>

      <!-- ─── MESSAGES ─── -->

      <!-- 1. User changes filter -->
      <line x1="120" y1="100" x2="318" y2="100" stroke="#c9a84c" stroke-width="1.5" marker-end="url(#sarr)"/>
      <text x="200" y="94" text-anchor="middle" font-size="10" fill="#c9a84c">1 : change(thème/régime)</text>
      <rect x="115" y="90" width="10" height="30" fill="#c9a84c" opacity="0.3" rx="1"/>

      <!-- 2. debounce 300ms -->
      <rect x="315" y="100" width="10" height="30" fill="#c9a84c" opacity="0.3" rx="1"/>
      <path d="M325,115 C340,115 340,125 325,130" fill="none" stroke="#c9a84c" stroke-width="1" stroke-dasharray="3,2"/>
      <text x="345" y="120" font-size="9" fill="#7a7d8e">debounce 300ms</text>

      <!-- 3. fetch GET menus_json -->
      <line x1="325" y1="140" x2="528" y2="140" stroke="#c9a84c" stroke-width="1.5" marker-end="url(#sarr)"/>
      <text x="420" y="134" text-anchor="middle" font-size="10" fill="#c9a84c">2 : GET ?r=menus_json&amp;theme=&amp;diet=</text>
      <rect x="315" y="130" width="10" height="30" fill="#c9a84c" opacity="0.3" rx="1"/>

      <!-- 4. route dispatch -->
      <line x1="530" y1="170" x2="725" y2="170" stroke="#2d6fa3" stroke-width="1.5" marker-end="url(#sarr)"/>
      <text x="620" y="164" text-anchor="middle" font-size="10" fill="#2d6fa3">3 : dispatch(menus_json)</text>
      <rect x="525" y="160" width="10" height="30" fill="#2d6fa3" opacity="0.3" rx="1"/>

      <!-- 5. json() -->
      <rect x="720" y="170" width="10" height="110" fill="#8b2635" opacity="0.3" rx="1"/>
      <line x1="730" y1="200" x2="918" y2="200" stroke="#8b2635" stroke-width="1.5" marker-end="url(#sarr)"/>
      <text x="820" y="194" text-anchor="middle" font-size="10" fill="#8b2635">4 : filter(filters[])</text>

      <!-- 6. SQL query -->
      <rect x="915" y="200" width="10" height="60" fill="#2d6fa3" opacity="0.3" rx="1"/>
      <text x="940" y="225" font-size="9" fill="#7a7d8e">SELECT + JOINs</text>
      <text x="940" y="240" font-size="9" fill="#7a7d8e">WHERE theme/diet</text>

      <!-- 7. return menus -->
      <line x1="915" y1="260" x2="732" y2="260" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#rarr)"/>
      <text x="820" y="254" text-anchor="middle" font-size="10" fill="#3d8b5e">5 : Menu[] (tableau PHP)</text>

      <!-- 8. json_encode -->
      <line x1="720" y1="285" x2="528" y2="285" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#rarr)"/>
      <text x="620" y="279" text-anchor="middle" font-size="10" fill="#3d8b5e">6 : application/json</text>

      <!-- 9. response to JS -->
      <line x1="528" y1="310" x2="327" y2="310" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#rarr)"/>
      <text x="420" y="304" text-anchor="middle" font-size="10" fill="#3d8b5e">7 : Response JSON {menus: [...]}</text>

      <!-- 10. parse JSON -->
      <rect x="315" y="320" width="10" height="60" fill="#c9a84c" opacity="0.3" rx="1"/>
      <text x="335" y="340" font-size="9" fill="#7a7d8e">response.json()</text>
      <text x="335" y="355" font-size="9" fill="#7a7d8e">renderCards(menus)</text>

      <!-- 11. update DOM -->
      <line x1="315" y1="380" x2="122" y2="380" stroke="#c9a84c" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#rarr)"/>
      <text x="210" y="374" text-anchor="middle" font-size="10" fill="#c9a84c">8 : innerHTML update (cards)</text>

      <!-- 12. show count -->
      <rect x="115" y="380" width="10" height="30" fill="#c9a84c" opacity="0.3" rx="1"/>
      <text x="60" y="406" font-size="9" fill="#7a7d8e">Affiche N menus</text>

      <!-- ALT: no results -->
      <rect x="50" y="420" width="940" height="80" rx="3" fill="none" stroke="#2c2f3e" stroke-width="1" stroke-dasharray="4,2"/>
      <rect x="50" y="420" width="80" height="18" rx="2" fill="#2c2f3e"/>
      <text x="58" y="432" font-size="10" fill="#7a7d8e">alt [vide]</text>
      <text x="120" y="460" font-size="10" fill="#4a4f66">menus.length === 0 → afficher message "Aucun menu pour ces filtres"</text>

      <!-- ─── NOTES ─── -->
      <rect x="60" y="510" width="880" height="24" rx="3" fill="#16181f" stroke="#2c2f3e" stroke-width="1"/>
      <text x="70" y="526" font-size="10" fill="#7a7d8e">Note : le spinner de chargement est affiché entre les étapes 2 et 8. L'URL n'est pas modifiée (appel AJAX pur).</text>
    </svg>
  </div>

  <div style="margin: 40px 0 20px;">
    <h3 style="font-family:'JetBrains Mono',monospace; font-size:13px; letter-spacing:2px; text-transform:uppercase; color:var(--gold); margin-bottom:20px; font-weight:600;">
      Scénario B — Passation d'une commande
    </h3>
  </div>

  <div class="diagram-wrap" data-label="Sequence — Commande">
    <svg viewBox="0 0 1100 680" width="100%" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <marker id="sarr2" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#c9a84c"/>
        </marker>
        <marker id="rarr2" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
          <path d="M0,0 L0,6 L8,3 z" fill="#3d8b5e"/>
        </marker>
      </defs>

      <rect width="1100" height="680" fill="#1d2029" rx="4"/>

      <!-- LIFELINES -->
      <rect x="20" y="20" width="110" height="38" rx="3" fill="#23252f" stroke="#4a4f66" stroke-width="1.2"/>
      <text x="75" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#e8e6e0">:Client</text>
      <line x1="75" y1="58" x2="75" y2="650" stroke="#4a4f66" stroke-width="1" stroke-dasharray="5,3"/>

      <rect x="165" y="20" width="130" height="38" rx="3" fill="#152030" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="230" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#7bb8de">:index.php</text>
      <line x1="230" y1="58" x2="230" y2="650" stroke="#2d6fa3" stroke-width="1" stroke-dasharray="5,3"/>

      <rect x="325" y="20" width="150" height="38" rx="3" fill="#221e10" stroke="#c9a84c" stroke-width="1.2"/>
      <text x="400" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#c9a84c">:AuthService</text>
      <line x1="400" y1="58" x2="400" y2="650" stroke="#c9a84c" stroke-width="1" stroke-dasharray="5,3"/>

      <rect x="505" y="20" width="155" height="38" rx="3" fill="#1f0c10" stroke="#8b2635" stroke-width="1.2"/>
      <text x="582" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#d4758a">:OrderController</text>
      <line x1="582" y1="58" x2="582" y2="650" stroke="#8b2635" stroke-width="1" stroke-dasharray="5,3"/>

      <rect x="690" y="20" width="120" height="38" rx="3" fill="#0f1520" stroke="#2d6fa3" stroke-width="1.2"/>
      <text x="750" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#7bb8de">:Menu</text>
      <line x1="750" y1="58" x2="750" y2="650" stroke="#2d6fa3" stroke-width="1" stroke-dasharray="5,3"/>

      <rect x="840" y="20" width="120" height="38" rx="3" fill="#1f0c10" stroke="#8b2635" stroke-width="1.2"/>
      <text x="900" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#d4758a">:Order</text>
      <line x1="900" y1="58" x2="900" y2="650" stroke="#8b2635" stroke-width="1" stroke-dasharray="5,3"/>

      <rect x="985" y="20" width="100" height="38" rx="3" fill="#1f100f" stroke="#6b4fa3" stroke-width="1.2"/>
      <text x="1035" y="43" text-anchor="middle" font-size="11" font-weight="600" fill="#a886d4">:Mailer</text>
      <line x1="1035" y1="58" x2="1035" y2="650" stroke="#6b4fa3" stroke-width="1" stroke-dasharray="5,3"/>

      <!-- ─── MESSAGES ─── -->

      <!-- 1. POST order_create -->
      <rect x="70" y="90" width="10" height="20" fill="#c9a84c" opacity="0.3" rx="1"/>
      <line x1="80" y1="100" x2="228" y2="100" stroke="#c9a84c" stroke-width="1.5" marker-end="url(#sarr2)"/>
      <text x="150" y="94" text-anchor="middle" font-size="10" fill="#c9a84c">1 : POST ?r=order_create</text>

      <!-- 2. dispatch -->
      <rect x="225" y="100" width="10" height="20" fill="#2d6fa3" opacity="0.3" rx="1"/>
      <line x1="235" y1="110" x2="398" y2="110" stroke="#2d6fa3" stroke-width="1.5" marker-end="url(#sarr2)"/>
      <text x="312" y="104" text-anchor="middle" font-size="10" fill="#2d6fa3">2 : requireLogin()</text>

      <!-- 3. check session -->
      <rect x="395" y="110" width="10" height="35" fill="#c9a84c" opacity="0.3" rx="1"/>
      <line x1="405" y1="130" x2="237" y2="130" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#rarr2)"/>
      <text x="312" y="124" text-anchor="middle" font-size="10" fill="#3d8b5e">3 : isLogged → true</text>

      <!-- ALT: not logged -->
      <rect x="30" y="145" width="460" height="38" rx="3" fill="none" stroke="#2c2f3e" stroke-width="1" stroke-dasharray="3,2"/>
      <rect x="30" y="145" width="84" height="18" rx="2" fill="#2c2f3e"/>
      <text x="38" y="157" font-size="9" fill="#7a7d8e">alt [non connecté]</text>
      <text x="120" y="168" font-size="9" fill="#4a4f66">redirect → ?r=login</text>

      <!-- 4. create() -->
      <line x1="235" y1="195" x2="578" y2="195" stroke="#2d6fa3" stroke-width="1.5" marker-end="url(#sarr2)"/>
      <text x="400" y="189" text-anchor="middle" font-size="10" fill="#2d6fa3">4 : create()</text>

      <!-- 5. find menu + check stock -->
      <rect x="577" y="195" width="10" height="110" fill="#8b2635" opacity="0.3" rx="1"/>
      <line x1="587" y1="210" x2="748" y2="210" stroke="#8b2635" stroke-width="1.5" marker-end="url(#sarr2)"/>
      <text x="668" y="204" text-anchor="middle" font-size="10" fill="#8b2635">5 : find(menuId)</text>

      <rect x="745" y="210" width="10" height="35" fill="#2d6fa3" opacity="0.3" rx="1"/>
      <line x1="745" y1="230" x2="589" y2="230" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#rarr2)"/>
      <text x="668" y="224" text-anchor="middle" font-size="10" fill="#3d8b5e">6 : menu{stock, price}</text>

      <!-- ALT: no stock -->
      <rect x="505" y="248" width="380" height="38" rx="3" fill="none" stroke="#2c2f3e" stroke-width="1" stroke-dasharray="3,2"/>
      <rect x="505" y="248" width="80" height="18" rx="2" fill="#2c2f3e"/>
      <text x="512" y="260" font-size="9" fill="#7a7d8e">alt [stock = 0]</text>
      <text x="600" y="271" font-size="9" fill="#4a4f66">Erreur "Stock épuisé" → redirect</text>

      <!-- 7. Order::create() -->
      <line x1="587" y1="300" x2="898" y2="300" stroke="#8b2635" stroke-width="1.5" marker-end="url(#sarr2)"/>
      <text x="740" y="294" text-anchor="middle" font-size="10" fill="#8b2635">7 : Order::create(data)</text>

      <rect x="895" y="300" width="10" height="40" fill="#8b2635" opacity="0.3" rx="1"/>
      <text x="915" y="320" font-size="9" fill="#7a7d8e">INSERT orders</text>

      <!-- 8. addStatusHistory -->
      <line x1="905" y1="320" x2="905" y2="340" stroke="#8b2635" stroke-width="1" stroke-dasharray="3,2"/>
      <text x="915" y="336" font-size="9" fill="#7a7d8e">addStatusHistory('créée')</text>

      <!-- 9. decreaseMenuStock -->
      <line x1="905" y1="345" x2="748" y2="345" stroke="#8b2635" stroke-width="1.5" marker-end="url(#sarr2)"/>
      <text x="825" y="340" text-anchor="middle" font-size="10" fill="#8b2635">8 : decreaseMenuStock()</text>

      <line x1="745" y1="360" x2="589" y2="360" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#rarr2)"/>
      <text x="668" y="354" text-anchor="middle" font-size="10" fill="#3d8b5e">9 : orderId</text>

      <!-- 10. send email -->
      <line x1="587" y1="385" x2="1033" y2="385" stroke="#8b2635" stroke-width="1.5" marker-end="url(#sarr2)"/>
      <text x="800" y="379" text-anchor="middle" font-size="10" fill="#8b2635">10 : sendConfirmation(email)</text>

      <rect x="1030" y="385" width="10" height="35" fill="#6b4fa3" opacity="0.3" rx="1"/>
      <line x1="1030" y1="405" x2="589" y2="405" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#rarr2)"/>
      <text x="800" y="399" text-anchor="middle" font-size="10" fill="#3d8b5e">11 : mail envoyé ✓</text>

      <!-- 12. redirect -->
      <line x1="577" y1="430" x2="237" y2="430" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#rarr2)"/>
      <text x="400" y="424" text-anchor="middle" font-size="10" fill="#3d8b5e">12 : redirect ?r=user_orders</text>

      <!-- 13. HTTP 302 -->
      <line x1="228" y1="455" x2="77" y2="455" stroke="#3d8b5e" stroke-width="1.5" stroke-dasharray="4,3" marker-end="url(#rarr2)"/>
      <text x="150" y="449" text-anchor="middle" font-size="10" fill="#3d8b5e">13 : HTTP 302 → mes commandes</text>

      <!-- LOOP: status updates by employee -->
      <rect x="490" y="475" width="575" height="75" rx="3" fill="none" stroke="#3d8b5e" stroke-width="1" stroke-dasharray="4,2"/>
      <rect x="490" y="475" width="90" height="18" rx="2" fill="#0f1f17"/>
      <text x="495" y="487" font-size="9" fill="#3d8b5e">loop [employé]</text>
      <text x="500" y="508" font-size="10" fill="#80c49a">Employé → updateStatusByEmployee(orderId, newStatus)</text>
      <text x="500" y="526" font-size="10" fill="#3d8b5e">→ addStatusHistory(newStatus) → redirect dashboard</text>

      <!-- ─── NOTES ─── -->
      <rect x="20" y="580" width="1060" height="24" rx="3" fill="#16181f" stroke="#2c2f3e" stroke-width="1"/>
      <text x="30" y="596" font-size="10" fill="#7a7d8e">Note : total_price = (price × people_count) + delivery_price - discount. Le calcul est fait dans OrderController avant l'appel à Order::create().</text>
    </svg>
  </div>

  <div class="legend" style="margin-top:20px;">
    <div class="legend-item"><div class="legend-dot" style="background:#c9a84c;"></div>Message synchrone →</div>
    <div class="legend-item"><div class="legend-dot" style="background:#3d8b5e;"></div>Message retour (response) --→</div>
    <div class="legend-item"><div class="legend-dot" style="background:#2c2f3e; border: 1px dashed #4a4f66;"></div>Fragment alt / loop</div>
    <div class="legend-item"><div class="legend-dot" style="background:#8b2635; opacity:0.5;"></div>Activation (bloc d'exécution)</div>
  </div>
</section>

<!-- FOOTER -->
<footer style="padding:32px 64px; border-top:1px solid #2c2f3e; display:flex; justify-content:space-between; align-items:center;">
  <div style="font-family:'JetBrains Mono',monospace; font-size:11px; color:#4a4f66; letter-spacing:1px;">
    VITE &amp; GOURMAND — UML ECF 2026
  </div>
  <div style="font-family:'JetBrains Mono',monospace; font-size:11px; color:#4a4f66; letter-spacing:1px;">
    PHP 8.2 · MySQL · MongoDB · Apache
  </div>
</footer>

</body>
</html>
